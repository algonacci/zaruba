configs:

  createZarubaServiceNameDb:
    dbName: '{{ .GetEnv "DB_NAME" }}'

  zarubaServiceNameContainer:
    useImagePrefix: true
    imagePrefix: '{{ .GetValue "defaultImagePrefix" }}'
    imageName: zarubaImageName
    imageTag: '{{ .GetValue "defaultImageTag" }}'
    localhost: host.docker.internal
    commonVolumes: |
      {{ .GetPath "../../zarubaServiceName/dags" }}:/opt/airflow/dags
      {{ .GetPath "../../zarubaServiceName/logs" }}:/opt/airflow/logs
      {{ .GetPath "../../zarubaServiceName/plugins" }}:/opt/airflow/plugins
    volumes: '{{ .GetConfig "commonVolumes" }}'
    runInLocal: '{{ .GetValue "zarubaServiceNameRunInLocal" }}'
    user: '{{ .GetEnv "AIRFLOW_UID" }}:0'

  zarubaServiceNameConfigurator:
    containerName: zarubaContainerNameConfigurator
    entryPoint: bash
    command: /opt/airflow/configurator/init.sh 
    volumes: |
      {{ .GetPath "../../zarubaServiceName/configurator" }}:/opt/airflow/configurator
      {{ .GetConfig "commonVolumes" }}
    user: root

  zarubaServiceNameWebServer:
    containerName: zarubaContainerNameWebServer
    command: webserver
    ports: |
      {{ .GetEnv "ZARUBA_SERVICE_NAME_WEBSERVER_PORT" }}:8080

  zarubaServiceNameScheduler:
    containerName: zarubaContainerNameScheduler
    command: scheduler

  zarubaServiceNameWorker:
    containerName: zarubaContainerNameWorker
    command: celery worker

  zarubaServiceNameFlower:
    containerName: zarubaContainerNameFlower
    command: celery flower
    ports: |
      {{ .GetEnv "ZARUBA_SERVICE_NAME_FLOWER_PORT" }}:5555

  zarubaServiceNameHelm:
    releaseName: zaruba-service-name
    chart: helm/charts/airflow
    valueFile: helm/values/zarubaServiceName.yaml
    valueTemplateFile: helm/value-templates/zarubaServiceName.yaml
