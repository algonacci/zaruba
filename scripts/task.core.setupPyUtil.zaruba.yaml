tasks:

  core.setupPyUtil:
    icon: üêç
    location: ./python
    description: Setup zaruba's python util.
    private: true
    extend: core.runCoreScript
    saveLog: false
    config:
      start: |
        {{ if .IsTrue (.GetValue "setupInitPyUtil") }}
          {{ $d := .Decoration -}}
          if [ -z "$(pipenv --version)" ]
          then
              echo "{{ $d.Bold }}{{ $d.Red }}Pipenv is not installed{{ $d.Normal }}"
              echo "Please perform:"
              echo "* 'zaruba please setupPyenv' (recommended) or"
              echo "* 'pip install pipenv' (if you don't want to install pyenv)"
              exit 1
          fi
          PIPENV_IGNORE_VIRTUALENVS=1 PIPENV_DONT_LOAD_ENV=1 PIPENV_PIPFILE="${ZARUBA_HOME}/scripts/python/Pipfile" pipenv install
        {{ end }}
  

