tasks:

  runSeed:
    extend: core.startService
    location: ./
    env:
      SEED_HTTP_PORT:
        from: SEED_HTTP_PORT
        default: 3000
      SEED_RABBITMQ_HOST:
        from: RABBITMQ_HOST
        default: localhost
      SEED_RABBITMQ_USER:
        from: RABITMQ_DEFAULT_USER
        default: root
      SEED_RABBITMQ_PASS:
        from: RABITMQ_DEFAULT_PASS
        default: toor
      SEED_RABBITMQ_VHOST:
        from: RABBITMQ_DEFAULT_VHOST
        default: "/"
    lconfig:
      ports:
        - '{{.GetEnv "SEED_HTTP_PORT" }}'
    config:
      script: |
        pipenv install
        pipenv run uvicorn main:app --reload --port={{ .GetEnv "SEED_HTTP_PORT" }}
    dependencies:
      - runMysql
      - runRmq
