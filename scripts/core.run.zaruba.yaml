tasks:

  core.runScript:
    icon: üìî
    description: |
      Run script
      USAGE:
      ```yaml
      runTask:
        extend: core.runScript
        config:
          # Executable. (default: sh)
          cmd: sh
          # Executable argument to run script. (default: -c)
          cmdArg: -c
          # Before start script. (no default)
          beforeStart: ""
          # Start script. (no default)
          start: ""
          # After start script. (no default)
          afterStart: ""
          # Executed even before "BeforeStart". (no default)
          setup: ""
      ```
    private: true
    config:
      cmd: '{{ if .GetKwarg "defaultShell" }}{{ .GetKwarg "defaultShell" }}{{ else }}sh{{ end }}'
      cmdArg: "-c"
    env:
      PYTHONUNBUFFERED:
        from: PYTHONUNBUFFERED
        default: 1
    start:
    - '{{ .GetConfig "cmd" }}'
    - '{{ .GetConfig "cmdArg" }}'
    - |
        {{ .GetConfig "setup" }}
        {{ .GetConfig "beforeStart" }}
        {{ .GetConfig "start" }}
        {{ .GetConfig "afterStart" }}


  core.runCoreScript:
    icon: üìî
    description: |
      Run script for core tasks
      USAGE:
      ```yaml
      runTask:
        extend: core.runCoreScript
        config:
          # Start script. (default: "echo hello world")
          start: "echo hello world"
      ```
    private: true
    extend: core.runScript
    config:
      setup: |
        set -e
        UTIL="${ZARUBA_HOME}/scripts/util/sh"
        PY_UTIL="${UTIL}/py_util.sh"
      start: "echo hello world"


  core.runShellScript:
    icon: üêö
    description: |
      Run shell script
      USAGE:
      ```yaml
      runTask:
        extend: core.runCoreScript
        config:
          # Start script. (default: "echo hello world")
          start: echo hello world
      ```
    private: true
    extend: core.runScript
    config:
      start: "echo hello world"


  core.runPythonScript:
    icon: üêç
    description: |
      Run python script
      USAGE:
      ```yaml
      runTask:
        extend: core.runPythonScript
        config:
          # Start script. (default: "print('hello world')")
          start: print('hello world')
      ```
    private: true
    extend: core.runScript
    config:
      cmd: python
      start: "print('hello world')"


  core.runNodeJsScript:
    icon: üê∏
    description: |
      Run Node.Js script
      USAGE:
      ```yaml
      runTask:
        extend: core.runNodeJsScript
        config:
          # Start script. (default: "console.log('hello world')")
          start: console.log('hello world')
      ```
    private: true
    extend: core.runScript
    config:
      cmd: node
      cmdArg: "-p"
      start: "console.log('hello world')"
