includes:
  - ./core.action.project.zaruba.yaml
  - ./core.action.monorepo.zaruba.yaml
  - ./core.action.runscript.zaruba.yaml

tasks:

  update:
    icon: ðŸ”„
    description: Update zaruba
    extend: core.runShellScript
    config: 
      script: |
        cd {{ .BasePath }}/..
        git pull origin master
        go build
        echo "Zaruba built"
  
  core.setupPythonUtil:
    private: true
    extend: core.runShellScript
    config:
      script: |
        cd "{{ .BasePath }}/util/python"
        pipenv install
  
  setupUbuntu:
    icon: ðŸ’»
    description: Setup zaruba prerequisites for ubuntu
    extend: core.runShellScript
    config:
      script: |
        set -e
        echo "Update repository"
        apt-get update
        apt-get upgrade -y
        echo "Install packages"
        apt-get install -y ncat make wget curl git golang docker.io python3 python3-pip python-is-python3 nodejs npm
        if [ -z nvm --version ]
        then
          echo "Install nvm"
          curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.37.0/install.sh | bash
          nvm install node
          nvm use node
        fi
        echo "Install typescript"
        npm install -g typescript
        echo "Install Pipenv"
        pip3 install pipenv
        echo "Complete"