tasks:
  
  core.pullDockerImage:
    icon: üê≥
    private: true
    description: |
      Pull docker image.
      Common config:
        dockerEnv : Docker environment key (default: '{{ .GetValue "dockerEnv" }}')
        imageName : Image name
    extend: core.runCoreScript
    dependencies:
      - updateProjectLinks
    configRef: coreDocker
    config:
      imagePrefixTrailingSlash: true
      start: |
        {{ $d := .Decoration -}}
        {{ .Trim (.GetConfig "initDockerImagePrefixScript") "\n" }}
        IMAGE_NAME="{{ if .GetConfig "imageName" }}{{ .GetConfig "imageName" }}{{ else }}$({{ .Zaruba }} getServiceName "$(pwd)"){{ end }}"
        IMAGE_TAG="{{ .GetConfig "imageTag" }}"
        if [ ! -z "${IMAGE_TAG}" ]
        then
          pull_image "${DOCKER_IMAGE_PREFIX}${IMAGE_NAME}:${IMAGE_TAG}"
        else
          pull_image "${DOCKER_IMAGE_PREFIX}${IMAGE_NAME}"
        fi
        echo üéâüéâüéâ
        echo "{{ $d.Bold }}{{ $d.Yellow }}Docker image ${DOCKER_IMAGE_PREFIX}${IMAGE_NAME} pulled{{ $d.Normal }}"

