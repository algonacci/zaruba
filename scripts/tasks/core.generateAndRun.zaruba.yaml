tasks:

  core.generateAndRun:
    description: Generate script and run it
    private: true
    extend: core.runCoreScript
    config:
      scriptTemplate: ''
      localScriptFile: '{{ .GetWorkPath (printf "tmp/%s.tmp.sh" .Name) }}'
      remoteScriptFile: '/{{ .Name }}.tmp.sh'
      generateScript: '{{ $err := .WriteFile (.GetConfig "localScriptFile") (.GetConfig "scriptTemplate") -}}'
      uploadScript: ''
      runScript: ''
      _start: |
        {{ .GetConfig "generateScript" }}
        {{ .GetConfig "uploadScript" }}
        {{ .GetConfig "runScript" }}
      start: ''

