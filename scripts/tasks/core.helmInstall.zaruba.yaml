tasks:
  core.helmInstall:
    extend: core.runCoreScript
    private: true
    dependencies:
      - core.helmRepoUpdate
      - core.setKubeContext
    config:
      chart: ''
      valueFile: ''
      releaseName: ''
      start: |
        if [ "$(is_command_error helm status "{{ .GetConfig "releaseName" }}")" -eq 1 ]
        then
          helm install "{{ .GetConfig "releaseName" }}" "{{ .GetConfig "chart" }}" -f "{{ .GetConfig "valueFile" }}"
        else
          helm upgrade "{{ .GetConfig "releaseName" }}" "{{ .GetConfig "chart" }}" -f "{{ .GetConfig "valueFile" }}"
        fi
