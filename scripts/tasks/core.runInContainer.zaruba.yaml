tasks:

  core.runInContainer:
    icon: üê≥
    description: |
      Run command from inside the container
      Common config:
        containerName : Name of the container
        commands      : Command to be executed, separated by new line
    private: true
    extend: core.runCoreScript
    configRef: coreDocker
    config:
      commands: ""
      _start: |
        {{ $this := . -}}
        {{ range $index, $command := .Split (.Trim (.GetConfig "commands") " \n") "\n" -}}
          {{ if ne $command "" -}}
            echo "EXECUTE: {{ $command }}"
            docker exec "{{ $this.GetConfig "containerName" }}" {{ $command }}
          {{ end -}}
        {{ end -}}
      start: ""

