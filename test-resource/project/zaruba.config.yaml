environments:
  general:
    natsUrl: nats://nats.io:4222
    getMessageEvent: foo
    sendMessageEvent: bar
  services:
    gateway:
      port: 3000

components:
  greeting-lib:
    type: library
    location: "./libraries/greeting-lib"
  gateway:
    type: service
    origin: git@github.com:state-alchemists/zaruba-gateway-example.git
    branch: master
    location: "./services/gateway"
    start: npm install && node start
  greeter:
    type: service
    origin: git@github.com:goFrendiAsgard/zaruba-service-example.git
    branch: master
    location: "./services/greeter"
    start: npm install && node start
  nats:
    type: container
    run: docker run --name nats -p 4222:4222 -p 6222:6222 -p 8222:8222 -d nats
    containerName: nats

links:
  ./services/gateway:
    - ./megazord/gateway
  ./libraries/greeting-lib: 
    - ./services/greeter/greeting-lib
    - ./services/gateway/greeting-lib
  ./services/greeter:
    - ./megazord/greeter
  ./changelog.md:
    - ./libraries/greeting-lib/parent-changelog.md
    - ./services/greeter/parent-changelog.md
    - ./services/gateway/parent-changelog.md

executions:
  - nats
  - service
  - gateway