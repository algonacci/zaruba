tasks:

  createZarubaServiceNameDb:
    extend: zarubaAirflowPostgreServiceExecSql
    dependencies:
      - zarubaAirflowPostgreTask
    config:
      queries: 'CREATE DATABASE {{ .GetConfig "dbName" }}'
    configRef: createZarubaServiceNameDb
    envRef: createZarubaServiceNameDb

  configureZarubaServiceName:
    extend: core.runInDockerContainer
    location: ../../zarubaServiceName
    dependencies:
      - runZarubaServiceNameConfigurator
    config:
      containerShell: bash
      commands: |
        {{ .ParseFile "configurator.gotmpl.sh"}}
    configRef: zarubaServiceNameConfigurator
    envRef: zarubaServiceNameConfigurator
  
  configureZarubaServiceNameWorker:
    extend: core.runInDockerContainer
    location: ../../zarubaServiceName
    dependencies:
      - runZarubaServiceNameWorker
    config:
      containerShell: bash
      commands: |
        {{ .ParseFile "worker.gotmpl.sh"}}
    configRef: zarubaServiceNameWorker
    envRef: zarubaServiceNameWorker
  

