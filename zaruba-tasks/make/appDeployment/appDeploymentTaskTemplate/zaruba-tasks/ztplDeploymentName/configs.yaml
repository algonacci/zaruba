configs:

  prepareZtplDeploymentName:
    namespace: default
    imageName: ztpl-app-image-name
    imageTag: latest
    replicaCount: 1
    start: |
      {{ $d := .Decoration -}}
      DEPLOYMENT_CONFIG={}
      NAMESPACE='{{ .GetConfig "namespace" }}'
      IMAGE_NAME="{{ .GetDockerImageName }}"
      IMAGE_TAG="{{ if .GetConfig "imageTag" }}{{ .GetConfig "imageTag" }}{{ else }}latest{{ end }}"
      RAW_ENVS='{{ .ToJSON .GetEnvs }}'
      RAW_PORTS='{{ .GetConfig "ports" }}'
      REPLICA_COUNT='{{ .GetConfig "replicaCount" }}'
      . '{{ .GetProjectPath "zaruba-tasks/ztplDeploymentName/bash/util.sh" }}'
      . '{{ .GetProjectPath "zaruba-tasks/ztplDeploymentName/bash/prepareVariables.sh" }}'
      echo "${DEPLOYMENT_CONFIG}" > '{{ .GetProjectPath "ztplDeploymentDirectory/config/config.json" }}'
    ports: |
      ztplAppYamlPorts
  
  deployZtplAppDeploymentName: {}

  destroyZtplAppDeploymentName: {}