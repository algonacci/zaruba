tasks:

  testFastApiIntegration:
    icon: ðŸ§ª
    location: ../../../../playground
    extend: zrbRunShellScript 
    timeout: 1h
    dependencies:
      - pretest
      - testFastApi
      - testKafka
      - testRabbitmq
      # These tasks so much resources, let them finish first:
      - testCassandra
      - testGitlab
      - testAirbyte
      - testPrefect
    configRef: playgroundTest
    configs:
      start: |
        ../zaruba please startProvoRabbitmqContainer startProvoKafkaContainer -t
        sleep 20
        ../zaruba please testProvoFastApi -e 'PROVO_FAST_API_TEST_INTEGRATION=1' 
        ../zaruba please stopProvoRabbitmqContainer stopProvoKafkaContainer
