tasks:

  testAddComponents:
    location: ../../../../playground
    extend: zrbRunShellScript 
    dependencies:
      - testInitProject
    configRef: playgroundTest
    config:
      start: |
        ../zaruba please setProjectValue variableName=defaultImagePrefix variableValue=localhost:9999 
        ../zaruba please addSubrepo subrepoUrl="https://github.com/state-alchemists/fibonacci-clock" subrepoPrefix="provoFibo" 
        ../zaruba please initSubrepos 
        ../zaruba please pullSubrepos 
        ../zaruba please makeNativeAppRunner appDirectory=provoFibo appEnvs='{"HTTP_PORT":"3001"}'

        ../zaruba please addCassandra appDirectory=provoCassandra
        ../zaruba please addElasticsearch appDirectory=provoElasticsearch
        ../zaruba please addMongodb appDirectory=provoMongodb
        ../zaruba please addMysql appDirectory=provoMysql
        ../zaruba please addNginx appDirectory=provoNginx appPorts='["8980:80", "8943:443"]'
        ../zaruba please addPostgresql appDirectory=provoPostgresql
        ../zaruba please addRabbitmq appDirectory=provoRabbitmq
        ../zaruba please addRedis appDirectory=provoRedis
        ../zaruba please addTrino appDirectory=provoTrino
        ../zaruba please addFastApiModule appDirectory=provoFastApi appModuleName=library
        ../zaruba please addFastApiRouteHandler appDirectory=provoFastApi appModuleName=blog appHttpMethod=get appUrl=/
        ../zaruba please addFastApiEventHandler appDirectory=provoFastApi appModuleName=library appEventName=open
        ../zaruba please addFastApiRpcHandler appDirectory=provoFastApi appModuleName=library appRpcName=isBookAvailable
        ../zaruba please addFastApiCrud appDirectory=provoFastApi appModuleName=library appCrudEntity=book appCrudFields='["title", "author", "synopsis"]'