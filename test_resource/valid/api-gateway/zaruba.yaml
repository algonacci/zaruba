inputs:
  host:
    default: localhost
    description: Host

envs:
  apiGatewayEnv:
    PROMETHEUS_PORT:
      from: API_GATEWAY_PROMETHEUS_PORT
      default: 3002

configs:
  apiGatewayConfig:
    checkPrometheusPort: '{{ .GetEnv "PROMETHEUS_PORT" }}'

lconfigs:
  apiGatewayLconfig:
    authors: ["Ann", "Bob"]

tasks:

  runApiGateway:
    location: ./
    extend: core.runNodeJsService
    inputs:
    - host
    configRef: apiGatewayConfig
    config:
      checkPort: '{{ .GetEnv "HTTP_PORT" }}'
    lconfigRef: apiGatewayLconfig
    lconfig:
      tags: ["api", "nodejs"]
    envRef: apiGatewayEnv
    env:
      HTTP_PORT:
        from: API_GATEWAY_HTTP_PORT
        default: 3001
      

